apply plugin: PublicModulePlugin

dependencies {
    compile project(":eventuate-tram-jdbc-kafka")
    testCompile "io.eventuate.cdc:eventuate-cdc-connector-autoconfigure:$eventuateCdcVersion"
    testCompile "org.springframework.boot:spring-boot-starter-test:$springBootCdcVersion"
    testCompile "io.eventuate.cdc:eventuate-local-java-test-util:$eventuateCdcVersion"
    testCompile "io.eventuate.util:eventuate-util-test:$eventuateUtilVersion"

}

test {
    if (System.env['SPRING_PROFILES_ACTIVE'] == 'EventuatePolling' ||
            System.env['SPRING_PROFILES_ACTIVE'] == 'PostgresWal' ||
            (project.hasProperty("excludeCdcLibs") &&
            excludeCdcLibs.toBoolean())) {

        exclude '**/TramIntegrationCustomDBTest**'
    }
    forkEvery 1
}